"use strict";(self.webpackChunksermas_eu_github_io=self.webpackChunksermas_eu_github_io||[]).push([[1243],{5657:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"deployment/introduction","title":"Introduction","description":"SERMAS deployment is composed of different services. The main reference for the deployment is the sermas-toolkit-api repository.","source":"@site/docs/deployment/introduction.md","sourceDirName":"deployment","slug":"/deployment/introduction","permalink":"/docs/deployment/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/sermas-eu/sermas-eu.github.io/sidebar.ts/docs/deployment/introduction.md","tags":[],"version":"current","sidebarPosition":0.002,"frontMatter":{"sidebar_position":0.002},"sidebar":"tutorialSidebar","previous":{"title":"Deployment","permalink":"/docs/category/deployment"},"next":{"title":"API variables","permalink":"/docs/deployment/api"}}');var o=s(4848),t=s(8453);const r={sidebar_position:.002},l="Introduction",d={},c=[{value:"Kiosk configuration",id:"kiosk-configuration",level:2},{value:"API configuration",id:"api-configuration",level:2},{value:"Securing the setup",id:"securing-the-setup",level:2},{value:"API",id:"api",level:3},{value:"KIOSK",id:"kiosk",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,o.jsxs)(n.p,{children:["SERMAS deployment is composed of different services. The main reference for the deployment is the ",(0,o.jsx)(n.a,{href:"https://github.com/sermas-eu/sermas-toolkit-api",children:"sermas-toolkit-api repository"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"It's a docker compose setup with pre-defined defaults to ease the testing of the system."}),"\n",(0,o.jsx)(n.h2,{id:"kiosk-configuration",children:"Kiosk configuration"}),"\n",(0,o.jsxs)(n.p,{children:["The Kiosk is a browser-based web application. It uses camera and video access thus it require a ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",children:"secure context"})," to work."]}),"\n",(0,o.jsxs)(n.p,{children:["By default, it works on ",(0,o.jsx)(n.code,{children:"localhost:8080"}),". ",(0,o.jsx)(n.code,{children:"localhost"})," is considered a secure context mostly for development activities."]}),"\n",(0,o.jsx)(n.p,{children:"To serve the kiosk on the network or over a website, we need to add some additional configuration."}),"\n",(0,o.jsxs)(n.p,{children:["Follow the configuration needed to serve from an IP in the local network. We will use ",(0,o.jsx)(n.code,{children:"sermas.lan"})," as a placeholder (but could be an IP)."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"PRIVATE_API_BASE_URL=http://sermas.lan:8080/api"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"PUBLIC_API_BASE_URL=http://sermas.lan:8080/api"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"PUBLIC_AUTH_URL=http://sermas.lan:8080/keycloak"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"PUBLIC_MQTT_BASE_URL=sermas.lan:8080"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"PUBLIC_TOOLKIT_URL=http://sermas.lan:8080"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note"})," The kiosk on a local network should still run in ",(0,o.jsx)(n.code,{children:"localhost"})," to ensure microphone and camera access. Alternatively, the system should be exposed on the web over https."]}),"\n",(0,o.jsx)(n.h2,{id:"api-configuration",children:"API configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Read here for the ",(0,o.jsx)(n.a,{href:"/docs/deployment/api",children:"API env configurations"})," options"]}),"\n",(0,o.jsx)(n.h2,{id:"securing-the-setup",children:"Securing the setup"}),"\n",(0,o.jsx)(n.p,{children:"Some defaults are used to simplify the development but should be changed in real deployments."}),"\n",(0,o.jsx)(n.h3,{id:"api",children:"API"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_REALM"})," set the keycloack realm (default: sermas-local)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_CLIENT_ID"})," set the keycloack client ID used for administrative purposes (default: platform)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_SECRET"})," set the keycloack client password used for administrative purposes (default: platform)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ADMIN_SERVICE_ACCOUNT_USERNAME"})," set the keycloack admin user (default: admin)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ADMIN_SERVICE_ACCOUNT_PASSWORD"})," set the keycloack admin password (default: admin)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"kiosk",children:"KIOSK"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PRIVATE_AUTH_CLIENT_ID=platform"})," should match API ",(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_CLIENT_ID"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PRIVATE_AUTH_CLIENT_SECRET=platform"})," should match API ",(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_CLIENT_SECRET"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PUBLIC_AUTH_REALM"})," should match API ",(0,o.jsx)(n.code,{children:"AUTH_KEYCLOAK_REALM"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);